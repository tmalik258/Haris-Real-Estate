{% extends 'listing/layout.html' %}
{% load static %}

{% block style %}
	<link rel="stylesheet" href="{% static 'listing/css/draganddrop.css' %}" type="text/css" />
{% endblock %}

{% block body %}
<div class="container-fluid">
	<div class="d-flex align-items-center py-4 pb-5">
		<div class="container">
			<div class="row">
				<div class="auth_form col-12 col-lg-10">
					<form action="" method="post" enctype="multipart/form-data" class="form-floating m-auto p-4 py-5 col-lg-11">
						{% csrf_token %}
						<h1 class="h3 text-center">Update/Change your ad</h1><hr>
						{% if form.errors %}
							<p class="text-danger">Please correct the following errors:</p>
							{% for field in form %}
								{% if field.errors %}
									<div class="alert alert-danger alert-dismissible fade show" role="alert">
										{{ field.errors | striptags }}
										<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
									</div>
								{% endif %}
							{% endfor %}
						{% endif %}
						<div class="row">
							<div class="col-md-8 mb-3">{{ form.title.label }}{{ form.title }}</div>
							<div class="col mb-3">
								{{ form.price.label }}{{ form.price }}
								<div class="form-text" id="price_int_word"></div>
							</div>
						</div>
						<div class="row g-2">
							<div class="col-12 col-md-6">
								Purpose<br>
								<div class="container">
									<div class="row row-cols-2 g-2 mt-1">
										<div class="col">
											<input type="radio" class="btn-check" name="purpose" id="purpose_option1" autocomplete="off" value="S" {% if 'S' in purpose %} checked {% endif %}>
											<label class="btn form-select purpose" for="purpose_option1">For Sale</label>
										</div>
										<div class="col">
											<input type="radio" class="btn-check" name="purpose" id="purpose_option2" autocomplete="off" value="R" {% if 'R' in purpose %} checked {% endif %}>
											<label class="btn form-select purpose" for="purpose_option2">Rent Out</label>
										</div>
									</div>
								</div>
							</div>
							<div class="col">{{ form.category.label }}{{ form.category }}</div>
						</div>
						<div class="row">
							<div class="col-md-6 mt-3" id="bedroom">
								Bedroom <br>
								<div class="container">
									<div class="row g-2 my-1 mb-2">
										<div class="col-8">
											<input type="radio" class="btn-check" name="bedroom" id="bedroom_option0" autocomplete="off" value="S">
											<label class="btn form-select purpose" for="bedroom_option0">Studio</label>
										</div>
										<div class="col-4">
											<input type="radio" class="btn-check" name="bedroom" id="bedroom_option1" autocomplete="off" value="1">
											<label class="btn form-select purpose" for="bedroom_option1">1</label>
										</div>
										<div class="col-4">
											<input type="radio" class="btn-check" name="bedroom" id="bedroom_option2" autocomplete="off" value="2">
											<label class="btn form-select purpose" for="bedroom_option2">2</label>
										</div>
										<div class="col-4">
											<input type="radio" class="btn-check" name="bedroom" id="bedroom_option3" autocomplete="off" value="3">
											<label class="btn form-select purpose" for="bedroom_option3">3</label>
										</div>
										<div class="col-4">
											<input type="radio" class="btn-check" name="bedroom" id="bedroom_option4" autocomplete="off" value="4">
											<label class="btn form-select purpose" for="bedroom_option4">4</label>
										</div>
										<div class="col-4">
											<input type="radio" class="btn-check" name="bedroom" id="bedroom_option5" autocomplete="off" value="5">
											<label class="btn form-select purpose" for="bedroom_option5">5</label>
										</div>
										<div class="col-4">
											<input type="radio" class="btn-check" name="bedroom" id="bedroom_option6" autocomplete="off" value="6">
											<label class="btn form-select purpose" for="bedroom_option6">6</label>
										</div>
										<div class="col-4">
											<input type="radio" class="btn-check" name="bedroom" id="bedroom_option7" autocomplete="off" value="7">
											<label class="btn form-select purpose" for="bedroom_option7">7</label>
										</div>
										<div class="col-4">
											<input type="radio" class="btn-check" name="bedroom" id="bedroom_option8" autocomplete="off" value="8">
											<label class="btn form-select purpose" for="bedroom_option8">8</label>
										</div>
										<div class="col-4">
											<input type="radio" class="btn-check" name="bedroom" id="bedroom_option9" autocomplete="off" value="9">
											<label class="btn form-select purpose" for="bedroom_option9">9</label>
										</div>
										<div class="col-4">
											<input type="radio" class="btn-check" name="bedroom" id="bedroom_option10" autocomplete="off" value="10">
											<label class="btn form-select purpose" for="bedroom_option10">10</label>
										</div>
										<div class="col">{{ form.custom_bedroom }}</div>
									</div>
								</div>
							</div>
							<div class="col-md-6 mt-3" id="bathroom">
								Bathroom <br>
								<div class="container">
									<div class="row row-cols-3 row-cols-lg-10 g-2 g-sm-2 my-1 mb-2">
										<div class="col">
											<input type="radio" class="btn-check" name="bathroom" id="bathroom_option1" autocomplete="off" value="1">
											<label class="btn form-select purpose" for="bathroom_option1">1</label>
										</div>
										<div class="col">
											<input type="radio" class="btn-check" name="bathroom" id="bathroom_option2" autocomplete="off" value="2">
											<label class="btn form-select purpose" for="bathroom_option2">2</label>
										</div>
										<div class="col">
											<input type="radio" class="btn-check" name="bathroom" id="bathroom_option3" autocomplete="off" value="3">
											<label class="btn form-select purpose" for="bathroom_option3">3</label>
										</div>
										<div class="col">
											<input type="radio" class="btn-check" name="bathroom" id="bathroom_option4" autocomplete="off" value="4">
											<label class="btn form-select purpose" for="bathroom_option4">4</label>
										</div>
										<div class="col">
											<input type="radio" class="btn-check" name="bathroom" id="bathroom_option5" autocomplete="off" value="5">
											<label class="btn form-select purpose" for="bathroom_option5">5</label>
										</div>
										<div class="col">
											<input type="radio" class="btn-check" name="bathroom" id="bathroom_option6" autocomplete="off" value="6">
											<label class="btn form-select purpose" for="bathroom_option6">6</label>
										</div>
										<span class="w-100">{{ form.custom_bathroom }}</span>
									</div>
								</div>
							</div>
						</div>

						<div class="row mb-3">
							<div class="col">{{ form.area_size.label }}{{ form.area_size }}</div>
							<div class="col">{{ form.area_size_unit.label }}{{ form.area_size_unit }}</div>
						</div>

						<div class="row my-3">
							<div class="col-md-9">{{ form.address.label }}{{ form.address }}</div>
							<div class="col">{{ form.city.label }}{{ form.city }}</div>
						</div>
						<div class="col my-3">{{ form.description.label }}{{ form.description }}</div>

						{% comment %}
						<div id="dropzone" class="form-group mb-3">
							<label for="listing-image" style="color: #0c294a;">Click to upload Images or Drag and Drop Here <span class="text-muted small"><br>(Select upto 15 images for the property to upload.)</span></label>
							<input type="file" accept="image/" name="images" id="listing-image" multiple />
						</div>
						<div id="image-preview" class="col m-auto"></div> <!-- Container for displaying uploaded images -->
						{% endcomment %}
						<input type="submit" value="Save" class="btn btn-dark w-25 mb-3 float-end">
					</form>
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock %}

{% block script %}
	<!-- <script src="{% static 'listing/js/draganddrop.js' %}"></script> -->
	<script>
		let value_bedroom = "{{ bedroom }}";
		$(`input[type="radio"][name="bedroom"][value="${value_bedroom}"]`).prop('checked', true);
		$('input[type="radio"][name="bedroom"]').change(function (e) { 
			$('#id_custom_bedroom').val('');
		});
		$('#id_custom_bedroom').change(function (e) {
			$('input[type="radio"][name="bedroom"]').each(function (index, element) {
				$(this).prop('checked', false);
			});
		});

		let value_bathroom = "{{ bathroom }}";
		$(`input[type="radio"][name="bathroom"][value="${value_bathroom}"]`).prop('checked', true);
		$('input[type="radio"][name="bathroom"]').change(function (e) { 
			$('#id_custom_bathroom').val('');
		});
		$('#id_custom_bathroom').change(function (e) { 
			$('input[type="radio"][name="bathroom"]').each(function (index, element) {
				$(this).prop('checked', false);
			});
		});
	</script>
{% endblock %}