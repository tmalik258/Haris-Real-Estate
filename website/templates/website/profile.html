{% extends 'website/layout.html' %}
{% load static %}

{% block body %}
<section class="profile">
	{% if messages %}
		{% for message in messages %}
			<div {% if message.tags %} {% if message.tags == 'error' %} class="alert alert-danger alert-dismissible fade show text-center" {% else %} class="alert alert-{{ message.tags }} alert-dismissible fade show text-center" {% endif %} {% endif %} role="alert">
				{{ message }}
				<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
			</div>
		{% endfor %}
	{% endif %}
	<section class="m-auto text-center">
		{% if user.profile_image %}
			<div class="profileImage"><img src="{{ user.profile_image.url }}" alt="Front image" width="100%" height="100%" ></div>
		{% else %}
			<div class="profileImage"><img src="media/images/No_image/No_image_available.png" alt="Front image" width="100%" height="100%" ></div>
		{% endif %}
		<h1>{{ user.first_name }} {{ user.last_name }}</h1>
		<h4 class="text-secondary">{{ user.profile.bio_info }}</h4>
		<h6 class="text-muted">{{ user.email }}<br>{{ user.profile.phone_number }}</h6>
		{% if user.is_authenticated and user.is_staff %}
			<a href="{% url 'profile-update' %}"><button class="btn btn-outline-info" type="submit">Update Profile</button></a>
			<a href="{% url 'profile-update' %}"><button class="btn btn-outline-danger" type="submit">Update Password</button></a>
		{% endif %}
	</section><hr>

	<article class="properties">
		<h1><div class="seperator"></div>Properties<div class="seperator"></div></h1>
		<div class="row row-cols-2 g-4">
			{% for post in posts %}
				<div class="col">
					<div class="card" style="max-width: 540px; color: black;">
						<div class="row g-0">
							<div class="col-md-4">
								<a href="{% url 'single_property' item=post.id %}">
								{% if post.img.first %}
									<img loading="lazy" src="{{ post.img.first.images.url }}" class="card-img-top" height="100%" alt="{{ post.img.first.images }}">
								{% else %}
									<img loading="lazy" src="{% static 'website\img\icons\Dark theme logo (Haris real estate).png' %}" class="card-img-top" alt="No Image Uploaded" height="100%" style="background: black;" title="No Image Uploaded">
								{% endif %}
								</a>
							</div>
							<div class="col-md-8">
								<div class="card-body">
									<h5 class="card-title text-center">{{ post.title | title }}</h5><hr>
									<p class="card-text">PKR <span style="font-size: 20px;">{{ post.price }}</span></p>
									<p class="card-text">{{ post.get_category_display }} for {{ post.get_purpose_display }}</p>
									<p class="card-text">{{ post.area_size }} {{ post.get_area_size_unit_display }}</p>
									<!-- <p class="card-text">{{ post.get_city_display }}</p> -->
									<p class="card-text">{{ post.address | truncatechars:25}}</p>
									<p class="card-text">{{ post.description | truncatechars:25}}</p>
									<p class="card-text"><small class="text-muted">Listed {{ post.time_created | timesince }} ago</small></p>
									<a href="{% url 'single_property' item=post.id %}"  class="btn btn-outline-secondary email more">More</a>
									<a href="mailto:{{ post.creator.email }}"  class="btn btn-outline-secondary email">Email</a>
									<!-- <a href="tel:+92 311 5239286" class="btn btn-outline-secondary email">Call</a> -->
								</div>
							</div>
						</div>
							<!-- </a> -->
					</div>
				</div>
			{% empty %}
				<div class="emptyProperty">
					<h2>Sorry! No Property Found !!</h2>
				</div>
			{% endfor %}
	</article>
</section>
{% endblock %}